(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(14),l=a.n(i),r=(a(72),a(63)),s=a(53),c=a(25),u=a(66),m=a(54),h=a(65),d=a(2),p=a(55),b=a.n(p),v=a(41),g=a(4),f=a.n(g),D=a(64),E=function(e){var t=e.url,a=e.title,n=e.date;return o.a.createElement("div",{className:"column is-4-mobile  is-4-tablet is-2-desktop photo-card"},o.a.createElement("img",{src:t,alt:a}),o.a.createElement("span",{className:"photo-title"},a),o.a.createElement("span",{className:"photo-date"},f()(1e3*parseInt(n)).format("DD MMM YYYY hh:mm a")))},k=a(7),M=a.n(k),N=a(106),x=a(107),w=a(108),A=function(e){return o.a.createElement(x.a,{center:[25,-30.09],zoom:1},o.a.createElement(w.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),e.markers.map(function(e){return 0!==e.latitude&&function(e,t,a){var n=M.a.divIcon({html:"<img src='".concat(t,"' class='map-thumbnail' />")});return o.a.createElement(N.a,{position:e,icon:n,key:a})}([e.latitude,e.longitude],e.url,e.id)}))},C=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).searchPhotos=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.photos,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.page,n=e.licenseList();!1===n?e.setState({error:"No license selected!",photos:[],page:1}):e.setState({loading:!0,error:""},function(){b.a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=06f4e4b9f08bbf02355e3c11fc871923&text=dogs&format=json&nojsoncallback=1&per_page=100&extras=description,date_upload,owner_name,geo,url_q,license&page=".concat(e.state.page,"&min_upload_date=").concat(e.state.filterMinDateUnix,"&max_upload_date=").concat(e.state.filterMaxDateUnix,"&license=").concat(n)).then(function(n){n.data.photos.photo.map(function(e){var a={id:e.id,date:e.dateupload,title:e.title,description:e.description._content,latitude:e.latitude,longitude:e.longitude,url:e.url_q};return t=Object(r.a)(t).concat([a])}),"0"===n.data.photos.total?e.setState({photos:t,isEnd:!1,loading:!1,error:"Photos not found!",page:1}):n.data.photos.page===n.data.photos.pages?e.setState({photos:t,isEnd:!0,loading:!1,error:"All photos loaded!",page:a+1}):e.setState({photos:t,loading:!1,error:"",page:a+1})}).catch(function(t){console.log(t),e.setState({photos:[],loading:!1,error:t,page:1})})})},e.licenseChange=function(t){e.setState({selectedItems:t},function(){e.searchPhotos([],0)})},e.state={photos:[],isEnd:!1,loading:!1,page:1,filterMinDate:f()("01/01/2000"),filterMinDateUnix:f()("01/01/2000").unix(),filterMaxDate:f()(),filterMaxDateUnix:f()().unix(),error:"",options:[{value:"0",label:"1: All Rights Reserved"},{value:"1",label:"2: Attribution-NonCommercial-ShareAlike License"},{value:"2",label:"3: Attribution-NonCommercial License"},{value:"3",label:"4: Attribution-NonCommercial-NoDerivs License"},{value:"4",label:"5: Attribution License"},{value:"5",label:"6: Attribution-ShareAlike License"},{value:"6",label:"7: Attribution-NoDerivs License"},{value:"7",label:"8: No known copyright restrictions"},{value:"8",label:"9: United States Government Work"},{value:"9",label:"10: Public Domain Dedication (CC0)"},{value:"10",label:"11: Public Domain Mark"}],selectedItems:[{value:"0",label:"1: All Rights Reserved"},{value:"1",label:"2: Attribution-NonCommercial-ShareAlike License"},{value:"2",label:"3: Attribution-NonCommercial License"},{value:"3",label:"4: Attribution-NonCommercial-NoDerivs License"},{value:"4",label:"5: Attribution License"},{value:"5",label:"6: Attribution-ShareAlike License"},{value:"6",label:"7: Attribution-NoDerivs License"},{value:"7",label:"8: No known copyright restrictions"},{value:"8",label:"9: United States Government Work"},{value:"9",label:"10: Public Domain Dedication (CC0)"},{value:"10",label:"11: Public Domain Mark"}]},e.searchPhotos=e.searchPhotos.bind(Object(d.a)(Object(d.a)(e))),e.changeMinDate=e.changeMinDate.bind(Object(d.a)(Object(d.a)(e))),e.changeMaxDate=e.changeMaxDate.bind(Object(d.a)(Object(d.a)(e))),window.onscroll=function(){window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&e.searchPhotos()},e}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.searchPhotos()}},{key:"licenseList",value:function(){var e=[];return 0!==this.state.selectedItems.length&&(this.state.selectedItems.map(function(t){return e.push(t.value)}),e.join())}},{key:"changeMinDate",value:function(e){var t=f()(e).unix();this.setState({photos:[],page:1,filterMinDate:e,filterMinDateUnix:t,error:""}),this.searchPhotos([],0)}},{key:"changeMaxDate",value:function(e){var t=f()(e).unix();this.setState({photos:[],page:1,filterMaxDate:e,filterMaxDateUnix:t,error:""}),this.searchPhotos([],0)}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.filterMinDate,n=e.filterMaxDate,i=e.selectedItems,l=e.error,r=e.options;return o.a.createElement("section",{className:"section"},o.a.createElement("div",{className:"columns is-multiline"},o.a.createElement("div",{className:"column is-2"},o.a.createElement("label",null,"From date:",o.a.createElement(v.a,{selected:a,onChange:this.changeMinDate}))),o.a.createElement("div",{className:"column is-2"},o.a.createElement("label",null,"To date:",o.a.createElement(v.a,{selected:n,onChange:this.changeMaxDate}))),o.a.createElement("div",{className:"column is-8"},o.a.createElement("label",null,"License:",o.a.createElement(D.a,{value:i,options:r,isMulti:!0,onChange:this.licenseChange}))),o.a.createElement("div",{className:"column is-4"},o.a.createElement("div",{className:"mapcontainer"},o.a.createElement(A,{markers:this.state.photos}))),o.a.createElement("div",{className:"column is-8 columns is-multiline is-mobile photo-container"},this.state.photos.map(function(e){return o.a.createElement(E,{key:e.id,id:e.id,url:e.url,title:e.title,date:e.date})}),t?o.a.createElement("div",{className:"loading"},"Loading..."):o.a.createElement("div",{className:"error"},l))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},67:function(e,t,a){e.exports=a(104)},72:function(e,t,a){}},[[67,2,1]]]);
//# sourceMappingURL=main.da1563e3.chunk.js.map